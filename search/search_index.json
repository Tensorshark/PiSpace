{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to PiSpace Documentation","text":"<p>This documentation provides everything you need to know about PiSpace.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Open source</li> </ul> <p>Check out the rest of the documentation for more details!</p>"},{"location":"Error_cases/","title":"Error cases","text":"<p>A robust system must anticipate and handle various error scenarios. We have tried to identify potential issues, such as overheating, ignition failure, and sensor malfunctions. For each error case, it outlines the trigger conditions, the sensors involved, and the actions taken to mitigate risks and ensure safety.</p> Error Case Trigger Condition Sensor(s) Outcome Overheating <code>case_temp &gt; MAX_TEMP_THRESHOLD</code> Case Temp Shut off fuel pump. Keep fan running to cool combustion chamber. Transition to Error state. Failure to Ignite <code>flame_sensor == FALSE</code> or <code>case_temp &lt; IGNITION_TEMP_THRESHOLD</code> after timeout Flame Sensor, Case Temp Stop pump to prevent flooding. Keep fan running to clear unburned fuel. Transition to Error state. Flame Extinguished <code>flame_sensor == FALSE</code> or <code>case_temp &lt; FLAME_OUT_TEMP</code> Flame Sensor, Case Temp Shut off fuel pump. Transition to Cooldown state to clear residual heat. Overcooling <code>case_temp &lt; MIN_TEMP_THRESHOLD</code> Case Temp Shut off pump and glow plug. Transition to Idle state to prevent unnecessary operation. Ambient Overheat <code>ambient_temp &gt; AMBIENT_MAX_TEMP_THRESHOLD</code> Ambient Temp Shut down the system (pump, glow plug, fan). Transition to Error state to signal overheating. Fuel Pump Malfunction <code>flame_sensor == FALSE</code> or case temp doesn't rise Flame Sensor, Case Temp Stop all components (fuel pump, fan, glow plug). Transition to Error state. Fan Failure No temp changes or flagged error Case Temp Transition to Error state. Attempt to restart the fan (if possible). Shut down other components if fan cannot be restarted. Glow Plug Failure <code>case_temp</code> doesn't rise during Glow phase Case Temp Transition to Error state. Prompt a restart or alert user for maintenance. Sensor Malfunction Invalid or static values (<code>sensor_change_rate &lt; MIN_RATE</code>) Any Transition to Error state. Attempt sensor recalibration or notify user of faulty sensor. Blocked Air Intake/Exhaust <code>temp_change_rate &gt; MAX_RATE</code> or <code>inlet_temp drops unexpectedly</code> Case Temp, Inlet Temp Shut off fuel pump and glow plug. Keep fan running to clear combustion chamber. Transition to Error state. Low Ambient Temperature <code>ambient_temp &lt; AMBIENT_MIN_TEMP_THRESHOLD</code> Ambient Temp Notify user to address low temperature conditions. Transition to Idle state to avoid inefficient operation or damage."},{"location":"Error_cases/#1-overheating","title":"1. Overheating","text":"<ul> <li>Cause: Combustion chamber temperature exceeds safe operating limits.</li> <li>Sensor: Case Temperature Sensor</li> <li>Variable/Trigger: <code>case_temp &gt; MAX_TEMP_THRESHOLD</code><ul> <li><code>MAX_TEMP_THRESHOLD</code> could be a value like 250\u00b0C or based on manufacturer specs.</li> </ul> </li> </ul>"},{"location":"Error_cases/#2-failure-to-ignite","title":"2. Failure to Ignite","text":"<ul> <li>Cause: The flame is not established within the expected timeframe during the ignition phase.</li> <li>Sensor: Flame Sensor (optional), Case Temperature Sensor</li> <li>Variable/Trigger:<ul> <li><code>flame_sensor == FALSE</code> after a specific time (<code>ignition_timeout</code>).</li> <li><code>case_temp &lt; IGNITION_TEMP_THRESHOLD</code> after <code>ignition_timeout</code>.</li> </ul> </li> </ul>"},{"location":"Error_cases/#3-flame-extinguished","title":"3. Flame Extinguished","text":"<ul> <li>Cause: Flame goes out unexpectedly during the Fire state.</li> <li>Sensor: Flame Sensor (optional), Case Temperature Sensor</li> <li>Variable/Trigger:<ul> <li><code>flame_sensor == FALSE</code> during Fire state.</li> <li><code>case_temp</code> drops rapidly or below a predefined value (<code>FLAME_OUT_TEMP</code>).</li> </ul> </li> </ul>"},{"location":"Error_cases/#4-overcooling","title":"4. Overcooling","text":"<ul> <li>Cause: Case temperature drops too low, possibly due to excessive airflow or incorrect operation.</li> <li>Sensor: Case Temperature Sensor</li> <li>Variable/Trigger: <code>case_temp &lt; MIN_TEMP_THRESHOLD</code></li> </ul>"},{"location":"Error_cases/#5-ambient-overheat","title":"5. Ambient Overheat","text":"<ul> <li>Cause: The ambient temperature exceeds safe limits.</li> <li>Sensor: Ambient Temperature Sensor</li> <li>Variable/Trigger: <code>ambient_temp &gt; AMBIENT_MAX_TEMP_THRESHOLD</code></li> </ul>"},{"location":"Error_cases/#6-fuel-pump-malfunction","title":"6. Fuel Pump Malfunction","text":"<ul> <li>Cause: Fuel pump fails to deliver fuel as expected.</li> <li>Sensor: Flame Sensor, Case Temperature Sensor</li> <li>Variable/Trigger:<ul> <li><code>flame_sensor == FALSE</code> despite pump being active.</li> <li><code>case_temp</code> does not rise as expected during Fire.</li> </ul> </li> </ul>"},{"location":"Error_cases/#7-fan-failure","title":"7. Fan Failure","text":"<ul> <li>Cause: Fan does not operate or airflow is insufficient for combustion or cooling.</li> <li>Sensor: None directly; inferred from system behavior.</li> <li>Variable/Trigger:<ul> <li>No change in <code>case_temp</code> during Glow or Cooldown.</li> <li>Error flag from the fan motor (if equipped).</li> </ul> </li> </ul>"},{"location":"Error_cases/#8-glow-plug-failure","title":"8. Glow Plug Failure","text":"<ul> <li>Cause: Glow plug fails to heat the combustion chamber.</li> <li>Sensor: Case Temperature Sensor</li> <li>Variable/Trigger: <code>case_temp</code> does not rise during Glow phase.</li> </ul>"},{"location":"Error_cases/#9-sensor-malfunction","title":"9. Sensor Malfunction","text":"<ul> <li>Cause: Sensor reports invalid values or stops responding.</li> <li>Sensor: Any</li> <li>Variable/Trigger:<ul> <li>Out-of-range or invalid readings, e.g., <code>case_temp == NULL</code> or <code>inlet_temp &lt; 0\u00b0C</code>.</li> <li>Sensor readings are static when they should be dynamic (<code>sensor_change_rate &lt; MIN_RATE</code>).</li> </ul> </li> </ul>"},{"location":"Error_cases/#10-blocked-air-intake-or-exhaust","title":"10. Blocked Air Intake or Exhaust","text":"<ul> <li>Cause: Airflow is restricted, causing incomplete combustion or overheating.</li> <li>Sensor: Case Temperature Sensor, Inlet Temperature Sensor</li> <li>Variable/Trigger:<ul> <li><code>case_temp</code> rises abnormally fast (<code>temp_change_rate &gt; MAX_RATE</code>).</li> <li><code>inlet_temp</code> drops despite fan activity.</li> </ul> </li> </ul>"},{"location":"Error_cases/#11-low-ambient-temperature","title":"11. Low Ambient Temperature","text":"<ul> <li>Cause: Ambient temperature too low for normal operation.</li> <li>Sensor: Ambient Temperature Sensor</li> <li>Variable/Trigger: <code>ambient_temp &lt; AMBIENT_MIN_TEMP_THRESHOLD</code></li> </ul>"},{"location":"Error_cases/#error-state-handling","title":"Error state Handling","text":"<p>Building upon the identified error cases, we discusses how the system transitions into and recovers from the Error state. We showcase user notifications, fail-safe measures, and system restarts for recoverable errors. The focus is on maintaining safety.</p> <ul> <li> <p>Error States:</p> <ul> <li>Most errors transition the system to an Error state where the system components are either stopped or placed in a safe configuration. In many cases, the fan continues running to clear heat or fumes.</li> <li> <p>User Notifications:</p> </li> <li> <p>Some errors (e.g., sensor malfunction, low ambient temperature) might require a user intervention or maintenance alert.</p> </li> <li> <p>System Restarts:</p> </li> <li> <p>For recoverable errors (e.g., blocked air intake or flame extinguished), the system can attempt a restart after clearing conditions.</p> </li> <li> <p>Fail-Safe Measures:</p> </li> <li> <p>The system prioritizes safety, ensuring no unburned fuel is left in the chamber, avoiding damage from overheating, and preventing unsafe operation under suboptimal conditions</p> </li> </ul> </li> </ul>"},{"location":"Operational_states/","title":"Operational states of heater","text":"<p>This section defines the operational states of the diesel heater and the role of each component (glow plug, pump, fan) during these states. It explains how the system progresses from idle to active heating and eventually shuts down safely. Each state is accompanied by a description and sensor monitoring requirements.</p> State Glow Plug Pump Fan Description Prime Off On Off Prepares the fuel line by priming it with fuel. Glow On Off On Heats the combustion chamber and provides airflow. Ignition On On On Glow plug remains active while fuel pump feeds fuel to establish the flame. Fire Off On On Combustion starts; pump feeds fuel; fan maintains airflow. Cooldown Off Off On Allows for safe shutdown by cooling the combustion chamber. Idle Off Off Off System is in standby; no components are active. Error Off Off On Fan runs to clear the chamber if an error occurs. Preheat On Off Off Activates the glow plug to bring the chamber to operating temp."},{"location":"Operational_states/#prime","title":"Prime","text":"<p>The Prime state prepares the fuel line by priming it with fuel. The pump is activated to ensure the system has an adequate fuel supply before proceeding to the ignition process. </p> <ul> <li>Glow Plug: Off</li> <li>Pump: On</li> <li>Fan: Off</li> </ul>"},{"location":"Operational_states/#sensors-and-values","title":"Sensors and Values:","text":"<ul> <li>Case Sensor: Monitor for significant temperature increases to ensure no residual combustion is occurring.</li> <li>Inlet Temp Sensor: Check air inlet temperature to verify the system is ready for operation.</li> <li>Ambient Temp Sensor: Monitor room temperature to determine if heating is necessary (optional).</li> <li>Flame Sensor: Not monitored in this state.</li> </ul>"},{"location":"Operational_states/#glow","title":"Glow","text":"<p>The Glow state activates the glow plug to heat the combustion chamber. The fan is also activated to provide airflow, ensuring proper oxygen availability for ignition.</p> <ul> <li>Glow Plug: On</li> <li>Pump: Off</li> <li>Fan: On</li> </ul>"},{"location":"Operational_states/#sensors-and-values_1","title":"Sensors and Values:","text":"<ul> <li>Case Sensor: Monitor for temperature rise, ensuring the combustion chamber reaches ignition-ready temperatures.</li> <li>Inlet Temp Sensor: Ensure air temperature is stable and within operational ranges.</li> <li>Ambient Temp Sensor: Not critical in this state.</li> <li>Flame Sensor: Not monitored in this state.</li> </ul>"},{"location":"Operational_states/#ignition","title":"Ignition","text":"<p>The Ignition state begins the process of establishing a flame. The glow plug remains active while the pump delivers fuel, and the fan ensures sufficient airflow. This state continues until the flame sensor detects a stable flame or the case sensor indicates sufficient combustion temperature.</p> <ul> <li>Glow Plug: On</li> <li>Pump: On</li> <li>Fan: On</li> </ul>"},{"location":"Operational_states/#sensors-and-values_2","title":"Sensors and Values:","text":"<ul> <li>Case Sensor: Monitor for a rapid temperature increase to verify combustion is starting.</li> <li>Inlet Temp Sensor: Check air stability to support proper combustion.</li> <li>Ambient Temp Sensor: Not critical in this state.</li> <li>Flame Sensor: Actively monitored to confirm flame.</li> </ul>"},{"location":"Operational_states/#fire","title":"Fire","text":"<p>The Fire state indicates that combustion has been successfully established. The glow plug is deactivated, and the pump continues to deliver fuel while the fan maintains airflow.</p> <ul> <li>Glow Plug: Off</li> <li>Pump: On</li> <li>Fan: On</li> </ul>"},{"location":"Operational_states/#sensors-and-values_3","title":"Sensors and Values:","text":"<ul> <li>Case Sensor: Monitor for consistent combustion temperatures, ensuring stable operation.</li> <li>Inlet Temp Sensor: Ensure air supply remains within expected temperature ranges.</li> <li>Ambient Temp Sensor: Used to regulate heating output.</li> <li>Flame Sensor: Periodically monitored to ensure flame stability.</li> </ul>"},{"location":"Operational_states/#cooldown","title":"Cooldown","text":"<p>The Cooldown state allows the system to safely shut down by cooling the combustion chamber. The fan remains active to dissipate heat, and the glow plug is deactivated.</p> <ul> <li>Glow Plug: Off</li> <li>Pump: Off</li> <li>Fan: On</li> </ul>"},{"location":"Operational_states/#sensors-and-values_4","title":"Sensors and Values:","text":"<ul> <li>Case Sensor: Monitor for a temperature drop to a safe level before transitioning to idle.</li> <li>Inlet Temp Sensor: Ensure air remains stable and does not contribute to overheating.</li> <li>Ambient Temp Sensor: Not critical in this state.</li> <li>Flame Sensor: Ensure no flame is present during the cooldown process.</li> </ul>"},{"location":"Operational_states/#idle","title":"Idle","text":"<p>The Idle state represents a standby mode where no components are active. The system waits for a signal to begin the next cycle.</p> <ul> <li>Glow Plug: Off</li> <li>Pump: Off</li> <li>Fan: Off</li> </ul>"},{"location":"Operational_states/#sensors-and-values_5","title":"Sensors and Values:","text":"<ul> <li>Case Sensor: Monitor for ambient stabilization to ensure the heater is cool and safe.</li> <li>Inlet Temp Sensor: Not critical in this state.</li> <li>Ambient Temp Sensor: Continuously monitored to determine if heating is needed.</li> <li>Flame Sensor: Ensure no residual flame is detected.</li> </ul>"},{"location":"Operational_states/#error","title":"Error","text":"<p>The Error state is triggered when an issue occurs, such as a failure to ignite or overheating. The fan runs to clear the combustion chamber and ensure safety.</p> <ul> <li>Glow Plug: Off</li> <li>Pump: Off</li> <li>Fan: On</li> </ul>"},{"location":"Operational_states/#sensors-and-values_6","title":"Sensors and Values:","text":"<ul> <li>Case Sensor: Monitor for abnormal temperature changes or overheating.</li> <li>Inlet Temp Sensor: Verify air supply for unexpected fluctuations.</li> <li>Ambient Temp Sensor: Not critical in this state.</li> <li>Flame Sensor: Ensure no flame persists during error handling.</li> </ul>"},{"location":"Operational_states/#preheat","title":"Preheat","text":"<p>The Preheat state activates the glow plug to bring the combustion chamber to the required operating temperature. This state occurs before the Glow state if additional heating is needed.</p> <ul> <li>Glow Plug: On</li> <li>Pump: Off</li> <li>Fan: Off</li> </ul>"},{"location":"Operational_states/#sensors-and-values_7","title":"Sensors and Values:","text":"<ul> <li>Case Sensor: Monitor for rising temperatures to confirm the chamber is heating effectively.</li> <li>Inlet Temp Sensor: Ensure air remains stable and does not cool the chamber.</li> <li>Ambient Temp Sensor: Not critical in this state.</li> <li>Flame Sensor: Not monitored in this state.</li> </ul>"},{"location":"ensor_polling/","title":"Sensor Polling","text":"<p>Sensor data is critical to the heater\u2019s performance and safety. We explore recommendations for sensor polling frequencies based on their role in the system. It introduces dynamic polling, which adjusts frequency based on operational states, and filtering techniques to smooth noisy data.</p>"},{"location":"ensor_polling/#sensor-polling-recommendations","title":"Sensor Polling Recommendations","text":"<ul> <li> <p>High-Resolution Sensors (e.g., Flame and Case Temp Sensors):</p> <ul> <li>Frequency: Poll every 100\u2013200 milliseconds (5\u201310 Hz).</li> <li>Reason: Rapid changes (e.g., flame ignition or overheating) require quick detection for safety.</li> <li> <p>Medium-Resolution Sensors (e.g., Inlet and Ambient Temp Sensors):</p> </li> <li> <p>Frequency: Poll every 500 milliseconds to 1 second (1\u20132 Hz).</p> </li> <li>Reason: These temperatures typically change slowly, so less frequent polling reduces system overhead.</li> <li> <p>Error Monitoring:</p> </li> <li> <p>For critical conditions (e.g., overheating, flame-out), ensure error checks are performed on each sensor poll cycle to respond in real-time.</p> </li> </ul> </li> </ul> Sensor Recommended Frequency Reason Case Temp Sensor 100\u2013200 ms Detect rapid temperature changes in combustion chamber. Flame Sensor 100\u2013200 ms Ensure real-time detection of flame establishment or loss. Inlet Temp Sensor 500 ms \u2013 1 sec Monitor air input stability without excessive overhead. Ambient Temp Sensor 1\u20132 sec Room temperature changes slowly; frequent updates unnecessary."},{"location":"ensor_polling/#dynamic-polling-nice-to-have","title":"Dynamic Polling (nice to have)","text":"<ul> <li> <p>Adjust Frequencies Based on State:</p> <ul> <li>Prime/Glow/Ignition/Fire: Use higher polling frequencies (100\u2013200 ms) for critical sensors (e.g., flame, case temp).</li> <li>Idle: Reduce polling frequency to save resources (e.g., 1\u20132 seconds for all sensors).</li> <li>Error States: Use medium polling (500 ms \u2013 1 second) for diagnostics.</li> <li> <p>Event-Driven Polling:</p> </li> <li> <p>Implement event-based interrupts for significant sensor changes (e.g., rapid temperature rise) to complement polling. This ensures critical events are handled promptly without constant high-frequency polling.</p> </li> </ul> </li> </ul>"},{"location":"ensor_polling/#filtering-and-smoothing-sensor-data","title":"Filtering and Smoothing Sensor Data","text":"<ul> <li>Use moving averages or low-pass filters to smooth noisy sensor readings:<ul> <li>For example, compute a running average of the last 5\u201310 samples to avoid reacting to transient spikes.</li> </ul> </li> <li>For flame sensors, consider using a debounce timer (require a steady flame signal for 1\u20132 seconds before confirming ignition).</li> </ul>"},{"location":"ensor_polling/#safety-and-redundancy","title":"Safety and Redundancy","text":"<ul> <li>Implement fail-safe timers for critical states (e.g., ignition, fire):<ul> <li>If expected conditions (e.g., flame detected, temp rising) are not met within a certain time, trigger an error.</li> </ul> </li> <li>Perform sensor health checks:<ul> <li>Verify sensors are returning valid data (e.g., within expected ranges) on each poll cycle to prevent erroneous readings from causing unsafe behavior.</li> </ul> </li> </ul>"}]}